<% if user_role_config.component_is_accessible?(component.manifest_name) %>
  <tr class="component-<%= component.id %>">
    <td>
      <% if component.manifest.admin_engine %>
        <%= link_to translated_attribute(component.name), manage_component_path(component) %><br>
      <% else %>
        <%= translated_attribute component.name %>
      <% end %>
    </td>
    <td>
      <%= t "decidim.components.#{component.manifest.name}.name" %>
    </td>
    <%= td_resource_scope_for(component.scope) %>
    <td class="table-list__actions">
      <% if component.manifest.admin_engine %>
        <%= with_tooltip t("actions.manage", scope: "decidim.admin"), class: "top" do %>
          <%= icon_link_to "pencil-line", manage_component_path(component), t("actions.manage", scope: "decidim.admin"), class: "action-icon--manage" %>
        <% end %>
      <% else %>
        <span class="action-space icon"></span>
      <% end %>

      <% if allowed_to? :share, :component, component: component %>
        <%= with_tooltip t("actions.share", scope: "decidim.admin"), class: "top" do %>
          <%= icon_link_to "share-line", url_for(action: :share, id: component, controller: "components"), t("actions.share", scope: "decidim.admin"), class: "action-icon--share" %>
        <% end %>
      <% else %>
        <span class="action-space icon"></span>
      <% end %>
      <% if allowed_to? :update, :component, component: component %>
        <%= with_tooltip t("actions.configure", scope: "decidim.admin"), class: "top" do %>
          <%= icon_link_to "settings-4-line", url_for(action: :edit, id: component, controller: "components"), t("actions.configure", scope: "decidim.admin"), class: "action-icon--configure" %>
        <% end %>
      <% else %>
        <span class="action-space icon"></span>
      <% end %>

      <% if allowed_to?(:update, :component, component: component) %>
        <% if component.published? %>
          <%= with_tooltip t("actions.unpublish", scope: "decidim.admin"), class: "top" do %>
            <%= icon_link_to "close-circle-line", url_for(action: :unpublish, id: component, controller: "components"), t("actions.unpublish", scope: "decidim.admin"), class: "action-icon--unpublish", method: :put %>
          <% end %>
        <% else %>
          <%= with_tooltip t("actions.publish", scope: "decidim.admin"), class: "top" do %>
            <%= icon_link_to "check-line", url_for(action: :publish, id: component, controller: "components"), t("actions.publish", scope: "decidim.admin"), class: "action-icon--publish", method: :put %>
          <% end %>
        <% end %>
      <% else %>
        <span class="action-space icon"></span>
      <% end %>

      <%= with_tooltip t("actions.preview", scope: "decidim.admin"), class: "top" do %>
        <%= icon_link_to "eye-line", main_component_path(component), t("actions.preview", scope: "decidim.admin"), class: "action-icon--preview", target: :blank, data: { "external-link": false } %>
      <% end %>

      <% if allowed_to? :update, :component, component: component %>
        <% if component.manifest.actions.empty? %>
          <%= with_tooltip t("actions.permissions", scope: "decidim.admin"), class: "top" do %>
            <%= icon "key-2-line", class: "action-icon action-icon--disabled" %>
          <% end %>
        <% else %>
          <%= with_tooltip t("actions.permissions", scope: "decidim.admin"), class: "top" do %>
            <%= icon_link_to "key-line", url_for(action: :edit, component_id: component, controller: "component_permissions"), t("actions.permissions", scope: "decidim.admin"), class: "action-icon--permissions" %>
          <% end %>
        <% end %>
      <% else %>
        <span class="action-space icon"></span>
      <% end %>

      <% if allowed_to? :destroy, :component, component: component %>
        <%= with_tooltip t("actions.destroy", scope: "decidim.admin"), class: "top" do %>
          <%= icon_link_to "delete-bin-line", url_for(action: :destroy, id: component, controller: "components"), t("actions.destroy", scope: "decidim.admin"), class: "action-icon--remove", method: :delete %>
        <% end %>
      <% else %>
        <span class="action-space icon"></span>
      <% end %>
    </td>
  </tr>
<% end %>
